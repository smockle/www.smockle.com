<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta content name=author><meta name=supported-color-schemes content="light dark"><meta name=theme-color content="#26856d"><link rel=icon href=https://www.smockle.com/assets/images/favicon.png><link rel=apple-touch-icon href=https://www.smockle.com/assets/images/apple-touch-icon.png><title>Smockle Blog - Keeping systems up-to-date</title><meta property="og:title" content="Smockle Blog - Keeping systems up-to-date"><meta name=twitter:title content="Smockle Blog - Keeping systems up-to-date"><meta property="og:site_url" content="https://blog.smockle.com/2019/04/21/keeping-systems-up-to-date/"><meta name=description content="When I set up a new home server, unattended-upgrades is one of the first packages I install1. The service watches for package updates and installs them automatically. It makes keeping up with security patches and bug fixes easy, but only for system packages. If you run services inside Docker containers, you’ll need to look elsewhere.
"><meta property="og:image" content="https://www.smockle.com/assets/images/og-image.png"><meta property="twitter:image" content="https://www.smockle.com/assets/images/twitter-image.png"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><link rel=alternate type=application/rss+xml href=https://blog.smockle.com/feed.xml><link href=/assets/css/style.css rel=stylesheet></head><body><div class=navigation><section id=wrapper><header class=h-card><a aria-label=Home class=u-url href=/><img alt="Smockle Logo" id=avatar class="u-photo logo" src=https://www.smockle.com/assets/images/smockle.svg width=48 height=48></a></header></section></div><article class="h-entry post"><header><div class=dates><time class=dt-published datetime="2019-04-21 00:00:00 +0000">Apr 21, 2019</time></div><h1 class=p-name>Keeping systems up-to-date</h1></header><section class="e-content post-body"><p>When I set up a new home server, <strong><a href=https://wiki.debian.org/UnattendedUpgrades>unattended-upgrades</a></strong> is one of the first packages I install<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. The service watches for package updates and installs them automatically. It makes keeping up with security patches and bug fixes easy, but only for system packages. If you run services inside Docker containers, you’ll need to look elsewhere.</p><p><strong><a href=https://github.com/containrrr/watchtower>Watchtower</a></strong> monitors running Docker containers and checks for updated Docker images. When an image used by a running container is updated, Watchtower shuts down the container then restarts it with the same options<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>. For best results, ensure the images you depend on receive regular updates.</p><p>If you maintain Docker images, you’ll want to rebuild them when their base images are updated. This will produce a new image that includes security patches and bug fixes available in the base image. Docker Hub’s <a href=https://docs.docker.com/docker-hub/builds/>Automated Builds</a> service supports this via a feature called “Repository Links”<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>:</p><p><img src=/uploads/2019/89a0bf8d2a.jpg alt="Repository Links"></p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>Here’s an example configuration for Raspberry Pi: <strong><a href=https://github.com/smockle/pifiles/blob/def7b993eb0a2c9008154716d6708a887bfe2439/pifiles.sh#L32-L58>smockle/pifiles</a></strong> <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>Watchtower runs in a Docker container and yes, it can update itself. <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>I used Travis CI to build and push my images, which unfortunately does not provide similar functionality. I’ll write about my migration to Docker Hub Automated Builds in the future. <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></section></article><script defer src=/assets/js/redirect.js></script><footer><div class=post-meta>© 2021 Clay Miller ~ Licensed under
<a rel=license href=http://creativecommons.org/licenses/by/4.0/legalcode>CC-BY-4.0</a> ~ <a href=https://blog.smockle.com/feed.xml>RSS</a></div></footer></body></html>